<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebServ - CGI Tests</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>CGI <span>Playground</span></h1>
            <p class="subtitle">Test Common Gateway Interface Support</p>
        </header>

        <nav>
            <a href="index.html">Dashboard</a>
            <a href="methods.html">Methods</a>
            <a href="cgi-bin/file_manager.py">File Manager</a>
            <a href="cgi.html" class="active">CGI Tests</a>
            <a href="sessions.html">Sessions</a>
        </nav>

        <div class="card">
            <h2 class="text-center">Manual CGI Execution</h2>
            <p class="text-center text-muted mb-4" style="max-width: 600px; margin-left: auto; margin-right: auto;">
                Enter the path to your CGI script (e.g., <code>cgi-bin/hello.py</code>). You can also provide data arguments which will be sent as a Query String (GET) or Body (POST).
            </p>
            
            <div style="max-width: 500px; margin: 0 auto;">
                <div class="mb-4">
                    <label for="scriptPath">Script Path</label>
                    <input type="text" id="scriptPath" value="cgi-bin/hello.py" placeholder="cgi-bin/script.py">
                </div>
                
                <div class="mb-4">
                    <label for="data">Data Arguments (Optional)</label>
                    <input type="text" id="data" placeholder="key=value&name=test">
                </div>

                <div class="flex gap-3">
                    <button onclick="execGet()" style="flex: 1;">Execute with GET</button>
                    <button onclick="execPost()" style="flex: 1; background: var(--accent);">Execute with POST</button>
                </div>
            </div>
        </div>

        <script>
            function execGet() {
                const path = document.getElementById('scriptPath').value;
                const data = document.getElementById('data').value;
                if (!path) { alert('Please enter a script path'); return; }
                
                let url = path;
                if (data) {
                    url += (url.includes('?') ? '&' : '?') + data;
                }
                window.location.href = url;
            }

            function execPost() {
                const path = document.getElementById('scriptPath').value;
                const data = document.getElementById('data').value;
                if (!path) { alert('Please enter a script path'); return; }
                
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = path;
                form.style.display = 'none';
                
                if (data) {
                    const pairs = data.split('&');
                    pairs.forEach(pair => {
                        const parts = pair.split('=');
                        const key = parts[0];
                        const value = parts.length > 1 ? parts.slice(1).join('=') : ''; 
                        
                        if (key.trim()) {
                            const input = document.createElement('input');
                            input.type = 'hidden';
                            input.name = key.trim();
                            input.value = value;
                            form.appendChild(input);
                        }
                    });
                }
                
                document.body.appendChild(form);
                form.submit();
            }
        </script>

        <footer>
            <p>WebServ Project Â© 2026</p>
        </footer>
    </div>
</body>
</html>
